<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ratan Mandal ‚Äî Editable Portfolio (No 3D)</title>
  <style>
    :root{--bg:#0b1020;--card:#0f1724;--accent:#7c5cff;--muted:#97a0b9;--glass:rgba(255,255,255,0.04)}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial;color:#e6f0ff;background:var(--bg)}
    header{position:relative;z-index:3;padding:20px 6%;display:flex;align-items:center;justify-content:space-between}
    .logo{font-weight:700;font-size:20px}
    nav a{color:var(--muted);margin-left:18px;text-decoration:none;font-weight:600}
    nav a:hover{color:var(--accent)}
    main{position:relative;z-index:2;padding:60px 6%;min-height:100vh;display:grid;grid-template-columns:1fr 420px;gap:40px;align-items:center}
    .hero h1{font-size:48px;line-height:1.02;margin-bottom:12px}
    .hero p{color:var(--muted);font-size:18px;margin-bottom:18px}
    .cta{display:flex;gap:12px}
    .btn{background:linear-gradient(90deg,var(--accent),#4ad0ff);border:none;padding:12px 18px;border-radius:10px;color:#021028;font-weight:700;cursor:pointer}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.015));padding:22px;border-radius:14px;backdrop-filter: blur(6px);box-shadow:0 6px 20px rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.04)}
    .avatar{width:100%;height:220px;border-radius:10px;overflow:hidden;background:linear-gradient(135deg,var(--accent),#2dd4bf);display:flex;align-items:center;justify-content:center;font-size:28px;font-weight:700;color:#021028}
    section{padding:60px 6%}
    .section-head{display:flex;align-items:center;gap:16px;margin-bottom:18px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}
    .skill{background:var(--card);padding:14px;border-radius:10px}
    .project{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:16px;border-radius:10px}
    footer{padding:30px 6%;text-align:center;color:var(--muted)}
    @media (max-width:980px){main{grid-template-columns:1fr;gap:24px;padding-top:120px}.avatar{height:180px}}

    /* Editor UI */
    .editor-bar{position:fixed;right:18px;top:80px;width:340px;background:rgba(5,7,15,0.95);padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);z-index:999;color:var(--muted);display:none}
    .editor-bar h4{margin:6px 0 8px;font-size:15px;color:#fff}
    .editor-bar label{font-size:13px;color:var(--muted);display:block;margin-top:8px}
    .editor-bar input[type="text"],.editor-bar input[type="color"],.editor-bar input[type="url"],.editor-bar select,.editor-bar textarea{width:100%;padding:8px;border-radius:6px;border:none;margin-top:6px;background:rgba(255,255,255,0.03);color:inherit}
    .editor-bar textarea{height:80px}
    .editor-bar button{margin-top:10px;padding:8px 10px;border-radius:8px;border:none;cursor:pointer;background:var(--accent);color:#021028;font-weight:700}
    .selected-outline{box-shadow:0 0 0 3px rgba(124,92,255,0.18) !important}
    .hint{position:fixed;left:16px;bottom:16px;background:var(--glass);padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);z-index:6;color:var(--muted);font-size:13px}

    /* Password modal */
    .pw-modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,23,0.6);z-index:1000}
    .pw-box{background:#071024;padding:18px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);width:380px}
    .pw-box input{width:100%;padding:10px;border-radius:8px;border:none;background:rgba(255,255,255,0.02);color:inherit}
    .pw-box button{margin-top:10px;padding:10px;border-radius:8px;border:none;background:var(--accent);color:#021028;font-weight:700}

    /* small helper for saved badge */
    .save-badge{position:fixed;right:18px;bottom:18px;background:#173047;padding:8px 12px;border-radius:8px;color:#bfe0ff;font-size:13px;z-index:999;display:none}
  </style>
</head>
<body>
  <header>
    <div class="logo">Ratan Mandal</div>
    <nav>
      <a href="#about">About</a>
      <a href="#skills">Skills</a>
      <a href="#projects">Projects</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <main>
    <div class="hero">
      <div>
        <h1 id="hero-name">Hi, I'm <span id="hero-name-accent" style="color:var(--accent)">Ratan Mandal</span></h1>
        <p id="hero-desc">I build interactive, polished interfaces. Front-end developer ‚Ä¢ UI/UX</p>
        <div class="cta">
          <button class="btn" id="btn-projects">See Projects</button>
          <button class="btn" id="btn-contact">Hire Me</button>
        </div>
        <div style="margin-top:20px;color:var(--muted)">
          <span style="margin-right:18px">‚≠ê Open to work</span>
          <span>üß≠ Based in India</span>
        </div>
      </div>
    </div>

    <aside class="card">
      <div class="avatar" id="avatar">RM</div>
      <div class="meta">
        <div class="title" id="meta-title">Ratan Mandal</div>
        <div class="sub" id="meta-sub">Front-End Developer ‚Ä¢ UI Designer</div>
      </div>

      <div style="margin-top:14px;color:var(--muted)">
        <div><strong>Location:</strong> <span id="meta-loc">India</span></div>
        <div><strong>Email:</strong> <span id="meta-email">ratan@example.com</span></div>
        <div style="margin-top:10px;display:flex;gap:8px">
          <a id="link-github" href="#" style="text-decoration:none;padding:8px 10px;border-radius:8px;background:rgba(255,255,255,0.02);color:var(--muted);font-weight:700">GitHub</a>
          <a id="link-linkedin" href="#" style="text-decoration:none;padding:8px 10px;border-radius:8px;background:rgba(255,255,255,0.02);color:var(--muted);font-weight:700">LinkedIn</a>
        </div>
      </div>
    </aside>
  </main>

  <section id="about">
    <div class="section-head"><h2 id="about-title">About</h2></div>
    <p id="about-text">I'm a designer-developer who enjoys crafting buttery smooth UI and tiny delightful animations.</p>
  </section>

  <section id="skills">
    <div class="section-head"><h2 id="skills-title">Skills</h2></div>
    <div class="grid" id="skills-grid">
      <div class="skill">HTML &amp; CSS</div>
      <div class="skill">JavaScript (ES6+)</div>
      <div class="skill">React &amp; Vite</div>
      <div class="skill">Three.js / WebGL</div>
      <div class="skill">UI / UX Design</div>
      <div class="skill">Git &amp; GitHub</div>
    </div>
  </section>

  <section id="projects">
    <div class="section-head"><h2 id="projects-title">Projects</h2></div>
    <div class="grid" id="projects-grid">
      <div class="project"><h3>3D Landing ‚Äî Interactive</h3><p>WebGL landing with 3D particles and custom shader-driven neon look.</p></div>
      <div class="project"><h3>Design System</h3><p>Reusable components, tokens and responsive patterns for fast UI development.</p></div>
      <div class="project"><h3>Portfolio Site</h3><p>Case studies, animations and micro-interactions with GSAP &amp; Three.js.</p></div>
    </div>
  </section>

  <section id="contact">
    <div class="section-head"><h2 id="contact-title">Contact</h2></div>
    <div class="card" style="max-width:720px;margin:0 auto">
      <form id="contact-form">
        <div style="display:flex;gap:12px;margin-bottom:10px">
          <input id="cname" name="name" placeholder="Your name" style="flex:1;padding:12px;border-radius:8px;border:none;background:rgba(255,255,255,0.02);color:inherit" />
          <input id="cemail" name="email" placeholder="Your email" style="flex:1;padding:12px;border-radius:8px;border:none;background:rgba(255,255,255,0.02);color:inherit" />
        </div>
        <textarea id="cmsg" name="message" placeholder="Message" style="width:100%;height:120px;padding:12px;border-radius:8px;border:none;background:rgba(255,255,255,0.02);color:inherit"></textarea>
        <div style="text-align:right;margin-top:12px"><button class="btn" type="button" id="sendBtn">Send Message</button></div>
      </form>
    </div>
  </section>

  <footer>
    ¬© <span id="year"></span> Ratan Mandal ‚Äî Built with ‚ù§Ô∏è
  </footer>

  <div class="hint">Tip: Open <code>?edit=on</code> and enter your password to unlock the editor.</div>

  <!-- Editor bar -->
  <div class="editor-bar" id="editorBar" aria-hidden="true">
    <h4>Edit Mode</h4>
    <div><strong>Selected:</strong> <span id="selName">none</span></div>
    <label>Text / HTML</label>
    <textarea id="editText" placeholder="Edit innerHTML"></textarea>
    <label>Text Color</label>
    <input type="color" id="editColor">
    <label>Background Color</label>
    <input type="color" id="editBgColor">
    <label>Set link (for &lt;a&gt;)</label>
    <input type="url" id="editHref" placeholder="https://example.com">
    <label>Replace image</label>
    <input type="file" id="editImage" accept="image/*">
    <label>Add social link</label>
    <input type="url" id="newSocialUrl" placeholder="https://instagram.com/yourprofile">
    <select id="newSocialType"><option value="github">GitHub</option><option value="linkedin">LinkedIn</option><option value="instagram">Instagram</option><option value="twitter">Twitter</option></select>
    <button id="applyBtn">Apply</button>
    <button id="saveLocalBtn" style="background:#2dd4bf;">Save (Local)</button>
    <button id="downloadBtn" style="background:#6fc3ff;">Download HTML</button>
    <button id="restoreBtn" style="background:#f3a76b;">Restore Saved</button>
    <button id="exitBtn" style="background:#ff7b7b;">Exit Edit Mode</button>
    <div style="margin-top:8px;font-size:12px;color:var(--muted)">Tip: Click any element to select it. Use "Save (Local)" to persist edits in this browser. Use "Download HTML" to get updated file for GitHub.</div>
  </div>

  <!-- Password modal -->
  <div class="pw-modal" id="pwModal" style="display:none">
    <div class="pw-box">
      <div style="color:var(--muted);margin-bottom:8px">Enter edit password to unlock editing</div>
      <input id="pwInput" type="password" placeholder="Password">
      <button id="pwSubmit">Unlock</button>
      <div id="pwMsg" style="color:#ffb3b3;margin-top:8px;display:none"></div>
    </div>
  </div>

  <div class="save-badge" id="saveBadge">Saved locally</div>

  <script>
    // EDIT PASSWORD (provided earlier)
    const EDIT_PASSWORD = 'Ratanmandal11@#';
    const urlParams = new URLSearchParams(window.location.search);
    const wantEdit = urlParams.get('edit') === 'on';
    const pwModal = document.getElementById('pwModal');
    const editorBar = document.getElementById('editorBar');
    const saveBadge = document.getElementById('saveBadge');

    function showPw(){ pwModal.style.display='flex'; }
    function hidePw(){ pwModal.style.display='none'; }
    function enableEditUI(){ editorBar.style.display='block'; editorBar.setAttribute('aria-hidden','false'); document.body.classList.add('edit-mode'); }
    function disableEditUI(){ editorBar.style.display='none'; editorBar.setAttribute('aria-hidden','true'); document.body.classList.remove('edit-mode'); }

    if(wantEdit && !sessionStorage.getItem('ratan_edit_unlocked')){ showPw(); }
    if(sessionStorage.getItem('ratan_edit_unlocked')){ enableEditUI(); }

    document.getElementById('pwSubmit').addEventListener('click', ()=>{
      const v = document.getElementById('pwInput').value;
      if(v === EDIT_PASSWORD){ sessionStorage.setItem('ratan_edit_unlocked','1'); hidePw(); enableEditUI(); alert('Edit mode unlocked ‚Äî Click any element to select and edit.'); }
      else{ const m = document.getElementById('pwMsg'); m.style.display='block'; m.textContent='Wrong password'; }
    });

    document.getElementById('exitBtn').addEventListener('click', ()=>{ sessionStorage.removeItem('ratan_edit_unlocked'); disableEditUI(); alert('Edit mode exited. Reopen with ?edit=on to unlock again.'); });

    // SELECT / EDIT
    let selected = null;
    function clearSelection(){ if(selected){ selected.classList.remove('selected-outline'); } selected = null; document.getElementById('selName').textContent='none'; document.getElementById('editText').value=''; document.getElementById('editColor').value='#ffffff'; document.getElementById('editBgColor').value='#000000'; document.getElementById('editHref').value=''; }

    document.addEventListener('click', (e)=>{
      if(!sessionStorage.getItem('ratan_edit_unlocked')) return;
      const el = e.target;
      if(el.closest('.editor-bar') || el.closest('.pw-box')) return;
      e.preventDefault(); e.stopPropagation();
      if(selected) selected.classList.remove('selected-outline');
      selected = el;
      selected.classList.add('selected-outline');
      document.getElementById('selName').textContent = selected.tagName.toLowerCase() + (selected.id?('#'+selected.id):'');
      document.getElementById('editText').value = selected.innerHTML.replace(/\n/g,'');
      try{ const cs = window.getComputedStyle(selected); document.getElementById('editColor').value = rgbToHex(cs.color || '#ffffff'); document.getElementById('editBgColor').value = rgbToHex(cs.backgroundColor || '#000000'); }catch(err){}
      if(selected.tagName.toLowerCase()==='a') document.getElementById('editHref').value = selected.href; else document.getElementById('editHref').value='';
    }, true);

    document.getElementById('applyBtn').addEventListener('click', ()=>{
      if(!selected){ alert('Select an element first by clicking it on the page.'); return; }
      const txt = document.getElementById('editText').value;
      const color = document.getElementById('editColor').value;
      const bg = document.getElementById('editBgColor').value;
      const href = document.getElementById('editHref').value;
      const imgFile = document.getElementById('editImage').files[0];

      try{ selected.innerHTML = txt; }catch(err){}
      selected.style.color = color;
      selected.style.backgroundColor = bg;
      if(href && selected.tagName.toLowerCase()==='a'){ selected.href = href; }
      if(imgFile){ const reader = new FileReader(); reader.onload = (ev)=>{
        if(selected.tagName.toLowerCase() === 'img'){ selected.src = ev.target.result; }
        else{
          const img = selected.querySelector('img');
          if(img) img.src = ev.target.result; else{
            selected.innerHTML = '<img src="'+ev.target.result+'" style="max-width:100%;height:auto;border-radius:8px">';
          }
        }
      }; reader.readAsDataURL(imgFile); }

      const newSocial = document.getElementById('newSocialUrl').value.trim();
      const type = document.getElementById('newSocialType').value;
      if(newSocial){
        if(type === 'github'){ document.getElementById('link-github').href = newSocial; document.getElementById('link-github').textContent = 'GitHub'; }
        if(type === 'linkedin'){ document.getElementById('link-linkedin').href = newSocial; document.getElementById('link-linkedin').textContent = 'LinkedIn'; }
      }

      alert('Applied changes to selected element. Use "Save (Local)" to persist edits in this browser or "Download HTML" to save file for GitHub.');
    });

    // SAVE to localStorage
    document.getElementById('saveLocalBtn').addEventListener('click', ()=>{
      // save body innerHTML only (editor UI excluded)
      const clone = document.body.cloneNode(true);
      // remove editor UI and modal
      const eb = clone.querySelector('#editorBar'); if(eb) eb.remove();
      const pm = clone.querySelector('#pwModal'); if(pm) pm.remove();
      const html = clone.innerHTML;
      localStorage.setItem('ratan_portfolio_saved_html', html);
      saveBadge.style.display = 'block'; setTimeout(()=>saveBadge.style.display='none',2000);
    });

    // RESTORE from localStorage
    document.getElementById('restoreBtn').addEventListener('click', ()=>{
      const html = localStorage.getItem('ratan_portfolio_saved_html');
      if(!html){ alert('No saved version found in this browser.'); return; }
      if(confirm('Restore saved version? This will overwrite current page content in this window (editor UI remains).')){
        document.body.innerHTML = html;
        // re-add editor UI and modal elements (they were removed when saving) by reloading page (simpler)
        alert('Restored. Please reload the page to re-enable editor UI.'); location.reload();
      }
    });

    // DOWNLOAD updated HTML for GitHub
    document.getElementById('downloadBtn').addEventListener('click', ()=>{
      // clone document, remove editor UI and pw modal
      const cloneDoc = document.documentElement.cloneNode(true);
      const eb = cloneDoc.querySelector('#editorBar'); if(eb) eb.remove();
      const pm = cloneDoc.querySelector('#pwModal'); if(pm) pm.remove();
      const hint = cloneDoc.querySelector('.hint'); if(hint) hint.remove();
      cloneDoc.querySelectorAll('.selected-outline').forEach(n=>n.classList.remove('selected-outline'));
      const doctype = '<!DOCTYPE html>\n';
      const html = doctype + cloneDoc.outerHTML;
      const blob = new Blob([html], {type: 'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'index.html'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
      alert('Downloaded updated index.html ‚Äî upload this file to your GitHub repo (overwrite existing index.html) to publish changes.');
    });

    // helper rgb->hex
    function rgbToHex(rgb){ if(!rgb) return '#000000'; if(rgb.indexOf('rgb')<0) return rgb; const nums = rgb.match(/\d+/g); if(!nums) return '#000000'; return '#'+((1<<24)+(parseInt(nums[0])<<16)+(parseInt(nums[1])<<8)+parseInt(nums[2])).toString(16).slice(1); }

    // quick exit on ESC
    document.addEventListener('keydown',(e)=>{ if(e.key==='Escape'){ if(sessionStorage.getItem('ratan_edit_unlocked')){ if(confirm('Exit edit mode?')){ sessionStorage.removeItem('ratan_edit_unlocked'); disableEditUI(); location.reload(); } } } });

    // basic button anchors
    document.getElementById('btn-projects').addEventListener('click', ()=>{document.getElementById('projects').scrollIntoView({behavior:'smooth'})});
    document.getElementById('btn-contact').addEventListener('click', ()=>{document.getElementById('contact').scrollIntoView({behavior:'smooth'})});
    document.getElementById('sendBtn').addEventListener('click', ()=>{ const name=document.getElementById('cname').value.trim(); if(!name){alert('Please enter your name');return;} alert('Thanks '+name+' ‚Äî demo message sent.'); });

    if(wantEdit && !sessionStorage.getItem('ratan_edit_unlocked')){ pwModal.style.display='flex'; }

    // show editor UI if unlocked
    function enableEditUI(){ editorBar.style.display='block'; editorBar.setAttribute('aria-hidden','false'); document.body.classList.add('edit-mode'); }
    function disableEditUI(){ editorBar.style.display='none'; editorBar.setAttribute('aria-hidden','true'); document.body.classList.remove('edit-mode'); }

    // if unlocked (from previous session) enable
    if(sessionStorage.getItem('ratan_edit_unlocked')) enableEditUI();

    // ensure year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
