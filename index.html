<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Edit Mode Portfolio</title>
<style>
  body {
    margin: 0;
    font-family: Arial;
    color: white;
    overflow-x: hidden;

    /* Default Animated Gradient */
    background: linear-gradient(130deg, #ff0077, #4200ff, #00d4ff);
    background-size: 600% 600%;
    animation: gradientMove 15s infinite alternate ease-in-out;
  }

  @keyframes gradientMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* Content */
  .container {
    padding: 40px;
  }

  /* EDITOR PANEL */
  #editorPanel {
    position: fixed;
    top: 50%;
    right: -320px;
    transform: translateY(-50%);
    width: 300px;
    background: #111;
    padding: 20px;
    border-left: 3px solid #00d4ff;
    transition: 0.3s ease;
    z-index: 9999;
  }
  #editorPanel.open { right: 0; }

  #editorPanel input,
  #editorPanel textarea {
    width: 100%;
    padding: 10px;
    margin: 6px 0;
    background: #222;
    border: 1px solid #555;
    color: white;
  }

  #editorPanel button {
    width: 100%;
    padding: 10px;
    margin-top: 8px;
    background: #00d4ff;
    border: none;
    color: black;
    font-weight: bold;
    cursor: pointer;
  }

  /* Upload BG Button */
  #bgPreview {
    width: 100%;
    height: 120px;
    object-fit: cover;
    margin-top: 10px;
    display: none;
  }

  .edit-highlight {
    outline: 2px dashed yellow;
  }
</style>
</head>

<body>

<!-- ðŸ”¥ CONTENT (editable) -->
<div class="container">
  <h1 data-edit>My Portfolio</h1>
  <p data-edit>Welcome to my editable website. Click any text to edit me.</p>
  <div data-edit>
    <h2>About Me</h2>
    <p>I am a web developer who loves animations and editing tools.</p>
  </div>
  <div data-edit>
    <h2>Projects</h2>
    <p>Project details will go here...</p>
  </div>
  <div data-edit>
    <h2>Contact</h2>
    <p>Email: example@mail.com</p>
  </div>
</div>

<!-- ðŸ”¥ EDITOR PANEL -->
<div id="editorPanel">
  <h3>Edit Content</h3>
  <textarea id="editorText" rows="6"></textarea>

  <button id="saveChange">Apply Change</button>
  <button id="saveBrowser">Save to Browser</button>
  <button id="downloadHTML">Download HTML</button>
  <button id="restoreDefault">Restore Default</button>

  <hr color="#333">

  <h3>Background Animation</h3>
  <input type="file" id="bgUpload" accept="video/*,image/gif" />
  <video id="bgPreview" autoplay loop muted></video>
</div>

<script>
let selectedElement = null;

/* CLICK TO EDIT */
document.querySelectorAll("[data-edit]").forEach(el => {
  el.addEventListener("click", () => {
    selectedElement = el;
    document.querySelectorAll("[data-edit]").forEach(x => x.classList.remove("edit-highlight"));
    el.classList.add("edit-highlight");

    document.getElementById("editorText").value = el.innerHTML;
    document.getElementById("editorPanel").classList.add("open");
  });
});

/* LIVE APPLY */
document.getElementById("editorText").addEventListener("input", () => {
  if (selectedElement) {
    selectedElement.innerHTML = document.getElementById("editorText").value;
  }
});

/* BUTTON: Apply (same as live) */
document.getElementById("saveChange").onclick = () => {
  if (selectedElement) {
    selectedElement.innerHTML = document.getElementById("editorText").value;
  }
};

/* SAVE TO BROWSER */
document.getElementById("saveBrowser").onclick = () => {
  localStorage.setItem("savedPage", document.body.innerHTML);
  alert("Saved successfully!");
};

/* RESTORE */
document.getElementById("restoreDefault").onclick = () => {
  localStorage.removeItem("savedPage");
  location.reload();
};

/* LOAD SAVED */
window.onload = () => {
  let saved = localStorage.getItem("savedPage");
  if (saved) document.body.innerHTML = saved;
};

/* DOWNLOAD HTML */
document.getElementById("downloadHTML").onclick = () => {
  const blob = new Blob([document.documentElement.outerHTML], { type: "text/html" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "edited_page.html";
  a.click();
};

/* UPLOAD CUSTOM ANIMATION BG */
document.getElementById("bgUpload").addEventListener("change", e => {
  let file = e.target.files[0];
  if (!file) return;

  let url = URL.createObjectURL(file);

  document.body.style.background = "none";
  document.body.style.backgroundColor = "black";

  let vid = document.getElementById("bgPreview");
  vid.src = url;
  vid.style.display = "block";

  vid.style.position = "fixed";
  vid.style.top = "0";
  vid.style.left = "0";
  vid.style.width = "100vw";
  vid.style.height = "100vh";
  vid.style.objectFit = "cover";
  vid.style.zIndex = "-1";
});
</script>

</body>
</html>
